# llmate.nvim

A Neovim plugin that leverages LLM to enhance text operations in your editor.

[English](#llmate.nvim) | [中文说明](#中文说明)

⚠️ **Warning**: This README was generated by AI 🤖. While efforts were made to ensure accuracy, there might be errors or missing details. Please review the content critically and refer to the code for precise information. 🙏

## Screenshots

### Main Screen
![showcase](https://raw.githubusercontent.com/Zhuxy/llmate.nvim/main/.github/screenshot_1.png)

### Generated Text
![showcase](https://raw.githubusercontent.com/Zhuxy/llmate.nvim/main/.github/screenshot_2.png)

## Features

- **Text Generation with LLM**: Uses any OpenAI API compatible LLM (like Azure OpenAI, Claude, etc.) to generate, transform, or analyze text based on your prompts
- **Visual Mode Integration**: Works seamlessly with Neovim's visual mode selections
- **Motion Support**: Supports Neovim motions for text selection in normal mode
- **Customizable Operations**: 
  - Append: Add generated text after the selection
  - Replace: Replace selected text with generated content
- **Template System**: Comes with customizable prompt templates
- **Interactive UI**: Built with nui-components for a smooth user experience
  - Real-time streaming of LLM responses
  - Loading indicators
  - Easy prompt selection and management

## Installation

Using [lazy.nvim](https://github.com/folke/lazy.nvim):

```lua
{
    "zhuxy/llmate.nvim",
    build = function(plugin)
        if plugin.opts and plugin.opts.backend and plugin.opts.backend == "rust" then
            vim.fn.system({ "make", "-C", plugin.dir })
        end
    end,
    opts = {
        backend = "curl", -- or "rust"
        key = "<leader>g", -- default keybinding
        debug = false, -- enable debug mode
        data_path = nil, -- custom path for config files
    },
    dependencies = "grapp-dev/nui-components.nvim",
}
```

## Configuration

Create a configuration file at `~/.config/llmate/config.yaml`:

```yaml
api_key: "your-openai-api-key"
api_base: "https://api.openai.com/v1"
model: "gpt-4"
max_tokens: 2000
```

## Usage

1. Select text in visual mode or use a motion in normal mode
2. Press `<leader>g` (or your custom keybinding)
3. Choose or enter your prompt
4. Choose what to do with the generated text (append or replace)

### Default Keybindings

- `<leader>g`: Open LLMate prompt selection in normal or visual mode
- `<C-c>`: Cancel current operation
- `<CR>`: Confirm selection
- `<C-n>/<C-p>`: Navigate through prompt history

### Default Prompts

The plugin comes with some default prompts:
- "What is ..."
- "Explain code"
- "Translate to English"

Default prompts and template will be created at `~/.config/llmate/prompts.yaml` when first running this plugin. After that, you can edit this file to add your own prompts and templates.

## Requirements

- Neovim >= 0.10.0
- Git (for installation)
- Make command
- Rust environment (cargo, rustc)
- curl (in $Path)

### Installing Rust

The plugin requires a Rust environment for compiling its native components if you use Rust as backend. You can install Rust using rustup:

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### Installing Make

Make sure you have the `make` command available in your system:

- For macOS: Install Xcode Command Line Tools
- For Ubuntu/Debian: `sudo apt-get install build-essential`
- For Fedora: `sudo dnf groupinstall "Development Tools"`

## License

MIT

## 中文说明

llmate.nvim 是一个基于大语言模型（LLM）的 Neovim 插件，用于增强编辑器中的文本操作。

### 主要特性

- 支持任何兼容 OpenAI API 的大语言模型（如 Azure OpenAI、Claude 等）
- 完美集成 Neovim 的可视模式选择
- 支持 Neovim 动作命令进行文本选择
- 可自定义操作：追加或替换生成的文本
- 模板系统：带有可自定义的提示模板
- 交互式界面：实时流式响应、加载指示器、便捷的提示选择和管理

详细的安装和配置说明请参考上方英文文档。
