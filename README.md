# llmate.nvim

A Neovim plugin that leverages LLM to enhance text operations in your editor.

[English](#llmate.nvim) | [ä¸­æ–‡è¯´æ˜](#ä¸­æ–‡è¯´æ˜)

âš ï¸ **Warning**: This README was generated by AI ğŸ¤–. While efforts were made to ensure accuracy, there might be errors or missing details. Please review the content critically and refer to the code for precise information. ğŸ™

## Screenshots

### Main Screen
![showcase](https://raw.githubusercontent.com/Zhuxy/llmate.nvim/main/.github/screenshot_1.png)

### Generated Text
![showcase](https://raw.githubusercontent.com/Zhuxy/llmate.nvim/main/.github/screenshot_2.png)

## Features

- **Text Generation with LLM**: Uses any OpenAI API compatible LLM (like Azure OpenAI, Claude, etc.) to generate, transform, or analyze text based on your prompts
- **Visual Mode Integration**: Works seamlessly with Neovim's visual mode selections
- **Motion Support**: Supports Neovim motions for text selection in normal mode
- **Customizable Operations**: 
  - Append: Add generated text after the selection
  - Replace: Replace selected text with generated content
- **Template System**: Comes with customizable prompt templates
- **Interactive UI**: Built with nui-components for a smooth user experience
  - Real-time streaming of LLM responses
  - Loading indicators
  - Easy prompt selection and management

## Installation

Using [lazy.nvim](https://github.com/folke/lazy.nvim):

```lua
{
    "zhuxy/llmate.nvim",
    build = function(plugin)
        if plugin.opts and plugin.opts.backend and plugin.opts.backend == "rust" then
            vim.fn.system({ "make", "-C", plugin.dir })
        end
    end,
    opts = {
        backend = "curl", -- or "rust"
        key = "<leader>g", -- default keybinding
        debug = false, -- enable debug mode
        data_path = nil, -- custom path for config files
    },
    dependencies = "grapp-dev/nui-components.nvim",
}
```

## Configuration

Create a configuration file at `~/.config/llmate/config.yaml`:

```yaml
api_key: "your-openai-api-key"
api_base: "https://api.openai.com/v1"
model: "gpt-4"
max_tokens: 2000
```

## Usage

1. Select text in visual mode or use a motion in normal mode
2. Press `<leader>g` (or your custom keybinding)
3. Choose or enter your prompt
4. Choose what to do with the generated text (append or replace)

### Default Keybindings

- `<leader>g`: Open LLMate prompt selection in normal or visual mode
- `<C-c>`: Cancel current operation
- `<CR>`: Confirm selection
- `<C-n>/<C-p>`: Navigate through prompt history

### Default Prompts

The plugin comes with some default prompts:
- "What is ..."
- "Explain code"
- "Translate to English"

Default prompts and template will be created at `~/.config/llmate/prompts.yaml` when first running this plugin. After that, you can edit this file to add your own prompts and templates.

## Requirements

- Neovim >= 0.10.0
- Git (for installation)
- Make command
- Rust environment (cargo, rustc)
- curl (in $Path)

### Installing Rust

The plugin requires a Rust environment for compiling its native components if you use Rust as backend. You can install Rust using rustup:

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### Installing Make

Make sure you have the `make` command available in your system:

- For macOS: Install Xcode Command Line Tools
- For Ubuntu/Debian: `sudo apt-get install build-essential`
- For Fedora: `sudo dnf groupinstall "Development Tools"`

## License

MIT

## ä¸­æ–‡è¯´æ˜

llmate.nvim æ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„ Neovim æ’ä»¶ï¼Œç”¨äºå¢å¼ºç¼–è¾‘å™¨ä¸­çš„æ–‡æœ¬æ“ä½œã€‚

### ä¸»è¦ç‰¹æ€§

- æ”¯æŒä»»ä½•å…¼å®¹ OpenAI API çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ Azure OpenAIã€Claude ç­‰ï¼‰
- å®Œç¾é›†æˆ Neovim çš„å¯è§†æ¨¡å¼é€‰æ‹©
- æ”¯æŒ Neovim åŠ¨ä½œå‘½ä»¤è¿›è¡Œæ–‡æœ¬é€‰æ‹©
- å¯è‡ªå®šä¹‰æ“ä½œï¼šè¿½åŠ æˆ–æ›¿æ¢ç”Ÿæˆçš„æ–‡æœ¬
- æ¨¡æ¿ç³»ç»Ÿï¼šå¸¦æœ‰å¯è‡ªå®šä¹‰çš„æç¤ºæ¨¡æ¿
- äº¤äº’å¼ç•Œé¢ï¼šå®æ—¶æµå¼å“åº”ã€åŠ è½½æŒ‡ç¤ºå™¨ã€ä¾¿æ·çš„æç¤ºé€‰æ‹©å’Œç®¡ç†

è¯¦ç»†çš„å®‰è£…å’Œé…ç½®è¯´æ˜è¯·å‚è€ƒä¸Šæ–¹è‹±æ–‡æ–‡æ¡£ã€‚
